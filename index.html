<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Grimm Protocol | LearnTheDarkTV</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700&family=Playfair+Display:ital,wght@0,700;1,700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #FAF9F6; /* Bone White */
            --text: #111111; /* Matte Black */
            --gold: #C5A028;
            --accent: #D32F2F; /* Verdict Red */
            --card-shadow: 0 10px 40px rgba(0,0,0,0.06);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; cursor: crosshair; }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Inter', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
        }

        /* Typography */
        h1 { font-family: 'Playfair Display', serif; text-transform: uppercase; letter-spacing: 7px; font-size: 1.3rem; margin-bottom: 5px; }
        .brand-sub { font-size: 0.55rem; letter-spacing: 4px; opacity: 0.5; margin-bottom: 40px; font-weight: 700; }

        .container { width: 100%; max-width: 420px; text-align: center; display: none; }
        .active { display: block; animation: luxFade 0.8s cubic-bezier(0.16, 1, 0.3, 1); }

        @keyframes luxFade { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }

        .card {
            background: white;
            padding: 60px 30px;
            border-radius: 0; /* Sharp Edges */
            box-shadow: var(--card-shadow);
            border: 1px solid #f0f0f0;
        }

        .btn {
            width: 100%;
            padding: 22px;
            background: var(--text);
            color: white;
            border: none;
            text-transform: uppercase;
            font-size: 0.7rem;
            letter-spacing: 3px;
            cursor: pointer;
            margin-bottom: 15px;
            transition: 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            font-weight: 700;
        }

        .btn-outline { background: transparent; color: var(--text); border: 1.5px solid var(--text); }
        .btn-red { background: var(--accent); }
        .btn:hover { transform: scale(1.01); background: #222; color: white; }

        .nav-link { font-size: 0.6rem; text-transform: uppercase; letter-spacing: 2px; cursor: pointer; opacity: 0.4; margin-top: 30px; display: inline-block; text-decoration: none; color: inherit; }
        .nav-link:hover { opacity: 1; color: var(--gold); }

        /* Game UI */
        .rank-tag { font-size: 0.6rem; color: var(--gold); letter-spacing: 3px; font-weight: 800; margin-bottom: 10px; display: block; }
        .mission-text { font-family: 'Playfair Display', serif; font-size: 1.9rem; margin: 40px 0; line-height: 1.3; font-style: italic; color: var(--text); }
        .strikes { font-size: 1.1rem; letter-spacing: 10px; margin-bottom: 20px; }
        
        .profile-card { cursor: pointer; transition: 0.3s; padding: 15px; border: 1px solid transparent; }
        .profile-card:hover { border-color: #eee; background: white; }
        .profile-dot { width: 65px; height: 65px; background: #111; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 15px; font-weight: 700; color: white; font-size: 1.2rem; }
        .profile-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 40px; }
    </style>
</head>
<body>

    <div class="container active" id="view-profiles">
        <h1>The Protocol</h1>
        <div class="brand-sub">LEARN THE DARK TV</div>
        <div class="profile-grid" id="profile-list"></div>
        <button class="btn btn-outline" onclick="showView('view-create-profile')">+ New Initiate</button>
    </div>

    <div class="container" id="view-create-profile">
        <h1>Registration</h1>
        <div class="brand-sub">AUTHENTICATE IDENTITY</div>
        <input type="text" id="player-name" placeholder="ALIAS" maxlength="12" style="width: 100%; padding: 20px; margin-bottom: 25px; border: 1px solid #eee; text-align: center; font-family: 'Inter'; letter-spacing: 3px;">
        <button class="btn" onclick="createProfile()">Authorize</button>
        <span class="nav-link" onclick="showView('view-profiles')">Back</span>
    </div>

    <div class="container" id="view-modes">
        <h1 id="welcome-name">Initiate</h1>
        <div class="brand-sub">SELECT FREQUENCY</div>
        <div class="card">
            <button class="btn" onclick="startMode('teens')">Teen Chaos</button>
            <button class="btn" onclick="startMode('friends')">Adult Chaos</button>
            <button class="btn" onclick="startMode('couple_funny')">Couple Stakes</button>
            <button class="btn btn-red" onclick="startMode('couple_spicy')">After Dark</button>
        </div>
        <span class="nav-link" onclick="logout()">Exit Protocol</span>
    </div>

    <div class="container" id="view-choice">
        <span class="rank-tag" id="game-rank">RANK: NOVICE</span>
        <div class="strikes" id="game-strikes">○ ○ ○</div>
        <div class="card">
            <h1 style="margin-bottom: 30px;">Choose Path</h1>
            <button class="btn" onclick="generate('truth')">Truth</button>
            <button class="btn btn-outline" onclick="generate('dare')">Dare</button>
        </div>
        <span class="nav-link" onclick="showView('view-modes')">Change Mode</span>
    </div>

    <div class="container" id="view-mission">
        <span class="rank-tag" id="mission-label">DARE</span>
        <div class="card">
            <div class="mission-text" id="mission-content"></div>
            <button class="btn" onclick="completeFate()">I Survived</button>
            <button class="btn btn-outline" onclick="failFate()">I Failed</button>
        </div>
    </div>

    <div class="container" id="view-verdict">
        <h1 style="color: var(--accent); letter-spacing: 10px;">Verdict</h1>
        <div class="brand-sub">THE PRICE OF FAILURE</div>
        <div class="card" style="border-color: var(--accent);">
            <div class="mission-text" id="verdict-content" style="font-size: 1.3rem;"></div>
            <button class="btn btn-red" onclick="showView('view-choice')">I Have Paid</button>
        </div>
    </div>

    <script>
        const RANKS = ["NOVICE", "APPRENTICE", "INITIATE", "ACOLYTE", "GUARDIAN", "SENTINEL", "ELDER", "THE ICON"];
        
        const GAME_DATA = {
            teens: {
                truth: ["Most cringe thing on your camera roll?", "Who is your current silent crush?", "A secret you're keeping from parents?", "Biggest lie you've told today?", "Who in this room is the best dressed?", "What's your most used emoji?", "Worst grade you've ever hidden?", "Who would you trade lives with here?", "Biggest fear that's actually silly?", "Longest you've gone without a shower?", "Last person you DM'd?", "Most embarrassing TikTok you've made?", "One thing you'd change about your face?", "Have you ever ghosted someone?", "A rumor you started?", "What's in your 'hidden' folder?", "Who's the most annoying person here?", "Your biggest pet peeve?", "Last thing you lied about?", "Worst haircut you've ever had?"],
                dare: ["Let group send an emoji to your last text.", "Socks on hands for 2 rounds.", "Sneak a napkin onto host's shoulder.", "Lick your elbow while staring at group.", "Swap shirt with person across from you.", "Call a contact and sing for 30 seconds.", "Post a nonsensical word on your story.", "Redo your hair using only your left hand.", "Drink water without using hands.", "Do your best impression of the person to your left.", "Speak in rhymes for 3 rounds.", "Let group choose your profile picture for 1 hour.", "Do 20 pushups while humming.", "Eat a snack without using your hands.", "Talk like a robot until your next turn.", "Try to make the group laugh in 60 seconds.", "Wear your shoes on the wrong feet.", "Give a 1-minute speech on why you're a genius.", "Let someone draw on your arm with a pen.", "Keep your eyes closed for the next round."],
            },
            friends: {
                truth: ["Biggest lie to skip a social event?", "Worst taste in music in this room?", "Most unhinged Google search recently?", "Ever looked through a partner's phone?", "Most expensive thing you've broken?", "Who would you trust to bury a body?", "Most embarrassing intoxicated moment?", "If you deleted all apps but one, which stays?", "Last lie you told your best friend?", "Most 'main character' moment you've had?", "Who here is most likely to become a villain?", "Biggest career regret?", "One person you'd never want to see naked?", "Most you've ever spent on a single night out?", "Have you ever stolen something?", "Your most shallow reason for dumping someone?", "What's your 'toxic trait'?", "Who in this room is the most attractive?", "Biggest lie on your resume?", "Last time you cried and why?"],
                dare: ["Steal a pen from host without being caught.", "Exchange clothing with person furthest away.", "Hide a friend's phone in a drawer.", "Ask a stranger for a bite of their food.", "Show last 3 photos in camera roll.", "Send 'I love you' to a contact group chooses.", "Wear shoes on wrong feet for 2 rounds.", "Passionate 2-minute speech on your greatness.", "Win a thumb war against everyone.", "Speak in rhymes until your next successful turn.", "Let the group post one word on your X/Twitter.", "Give a 5-minute foot rub to the winner.", "Call your ex and say 'I forgot to tell you...' then hang up.", "Blindfolded, identify 3 objects by touch.", "Order the weirdest thing on the menu for the group.", "Let someone send a DM from your Instagram.", "Do a lap around the house/bar while whistling.", "Swap chairs with the person you like least.", "Let group mix you a mystery drink.", "Tell a secret about someone not in the room."],
            },
            couple_funny: {
                truth: ["Chore you secretly hope I never ask for?", "In a horror movie, who gets caught first?", "Actual first impression of me?", "My most annoying habit you live with?", "One thing to change about our routine?", "Which of my friends is the most annoying?", "Most embarrassing thing I've done near your family?", "First thing you'd buy if we won the lottery?", "Funniest dream about our relationship?", "Who's the favorite child/pet?", "My outfit you secretly hate?", "Most you've ever lied to me about a price?", "One thing you'd change about my personality?", "Your most awkward moment in our first month?", "If we broke up, who would keep the dog?", "What's my 'signature' bad smell?", "One gift I gave you that you hated?", "How long did it take for you to really love me?", "Who's the better driver, really?", "One thing I do that makes you cringe?"],
                dare: ["Tickle me for 20 seconds straight.", "Hide my keys; give 3 hot/cold clues.", "Convince neighbor to give you a snack.", "1-minute stand-up comedy about our first date.", "Let me redo your hair/makeup for 1 hour.", "Piggyback ride through every room.", "Post photo of me with caption 'My World'.", "Make me laugh without touching me.", "Exchange phones for next 10 minutes.", "Sing a love song using only food names.", "Give me a 10-minute foot massage.", "Post an embarrassing story about us.", "Let me see your search history for 1 minute.", "Do 10 squats while holding me.", "Speak only in whispers to me for 1 round.", "Reenact our first kiss for the group.", "Let me choose your next outfit.", "Call my mom and tell her I'm the best.", "Wear my clothes for the next 3 rounds.", "Feed me a snack like I'm a baby."],
            },
            couple_spicy: {
                truth: ["Fantasy we haven't tried yet?", "One thing I do that is an instant turn-on?", "Best night together in three words?", "Most adventurous place you'd want to do it?", "One bedroom thing for a year, what is it?", "Secret desire you've been shy to mention?", "Most attractive thing I'm wearing right now?", "If we roleplayed, who would I be?", "Favorite part of my body to touch?", "Most unhinged thought you've had during?", "Something you want to try with toys?", "A place in this house we haven't used yet?", "Your favorite time of day for intimacy?", "One thing you want me to do more of?", "What's your 'safe word' if we had one?", "The best thing I do with my hands?", "What's the best I've ever looked?", "One secret thing you want to do to me?", "Last 'spicy' dream you had about me?", "What's my most seductive feature?"],
                dare: ["Remove one piece of my clothing with your teeth.", "Trace ice on my inner thigh until it melts.", "Blindfold and tease me for two minutes.", "Whisper a 30-second fantasy in my ear.", "60 seconds eye contact while kissing my neck.", "5-minute massage with lips and fingertips.", "Eat a snack directly off my skin.", "1-minute slow dance with no music.", "Tell me 3 things you'll do to me tonight.", "Let me choose a 'spicy' text for you to send me.", "Give me a 10-minute oil massage.", "Kiss every inch of my collarbone.", "Describe what you want to do to me in detail.", "Use a feather/ice on my lower back.", "Show me your 'naughty' face for 10 seconds.", "Let me tie your hands for one round.", "Seductively eat a piece of fruit.", "Remove my socks with only your mouth.", "Kiss me anywhere I choose for 30 seconds.", "Whisper something you've never told anyone."],
            },
            verdicts: ["Speak in British accent (10 mins).", "The Echo: Repeat everything said (5 mins).", "Hop on one leg when speaking (5 mins).", "Forbidden from phone until next Rank.", "Refer to everyone as 'Sir/Madame'.", "Third person speaking only (Rest of game).", "Statue: Stand in corner (2 rounds).", "Pay for next takeout/round of drinks.", "No speaking; communicate via gestures.", "Wear your shoes on wrong feet (30 mins).", "Hum a song; don't stop until guessed.", "Give winner a 15-min back rub.", "Kitchen/Cleaning duty for 48 hours.", "Address winner as 'Your Majesty'.", "Do the laundry for the entire week.", "Morning wake-up/diaper duty tomorrow.", "Write a handwritten apology note now.", "Official Fact-Checker: Google everything.", "Speak only in rhymes (10 mins).", "Silly Wiggle dance for 60 seconds."]
        };

        let profiles = JSON.parse(localStorage.getItem('grimm_profiles')) || [];
        let activeIdx = null, mode = '';

        function showView(id) {
            document.querySelectorAll('.container').forEach(v => v.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            window.scrollTo(0,0);
        }

        function render() {
            const list = document.getElementById('profile-list');
            list.innerHTML = '';
            profiles.forEach((p, i) => {
                list.innerHTML += `<div class="profile-card" onclick="sel(${i})"><div class="profile-dot">${p.name[0]}</div><div style="font-size:0.7rem;font-weight:800;letter-spacing:2px;text-transform:uppercase;">${p.name}</div><div style="font-size:0.5rem;opacity:0.5;">RANK: ${RANKS[p.rank-1]}</div></div>`;
            });
        }

        function createProfile() {
            const n = document.getElementById('player-name').value;
            if (n.length < 2) return;
            profiles.push({ name: n, rank: 1, strikes: 0 });
            save(); render(); showView('view-profiles');
            document.getElementById('player-name').value = '';
        }

        function sel(i) { activeIdx = i; document.getElementById('welcome-name').innerText = profiles[i].name; showView('view-modes'); }
        function startMode(m) { if (m.includes('spicy') && !confirm("18+ Content?")) return; mode = m; upd(); showView('view-choice'); }

        function generate(type) {
            const missions = GAME_DATA[mode][type];
            document.getElementById('mission-label').innerText = type.toUpperCase();
            document.getElementById('mission-content').innerText = missions[Math.floor(Math.random() * missions.length)];
            showView('view-mission');
        }

        function completeFate() {
            const p = profiles[activeIdx];
            if (p.rank < 8) p.rank++;
            save(); upd(); showView('view-choice');
        }

        function failFate() {
            const p = profiles[activeIdx];
            p.strikes++;
            const v = GAME_DATA.verdicts[Math.floor(Math.random() * GAME_DATA.verdicts.length)];
            document.getElementById('verdict-content').innerText = v;
            if (p.strikes >= 3) { p.strikes = 0; p.rank = 1; alert("EXILED. RANK RESET."); }
            save(); upd(); showView('view-verdict');
        }

        function upd() {
            const p = profiles[activeIdx];
            document.getElementById('game-rank').innerText = `RANK: ${RANKS[p.rank-1]}`;
            document.getElementById('game-strikes').innerText = "● ".repeat(p.strikes) + "○ ".repeat(3 - p.strikes);
        }

        function save() { localStorage.setItem('grimm_profiles', JSON.stringify(profiles)); }
        function logout() { activeIdx = null; showView('view-profiles'); }
        render();
    </script>
</body>
</html>
